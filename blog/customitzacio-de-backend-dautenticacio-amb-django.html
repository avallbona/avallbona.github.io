<!DOCTYPE HTML>
<!--
	halcyonic by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Andreu Vallbona - Customització de backend d'autenticació amb Django</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="shortcut icon" href="/theme/img/favicon.ico" rel="icon" type="image/x-icon" />
		<!--[if lte IE 8]><script src="/theme/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="/theme/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="/theme/css/ie9.css" /><![endif]-->
  		<meta property="og:locale" content="en">
		<meta property="og:site_name" content="Andreu Vallbona">

  <meta property="og:type" content="article">
  <meta property="article:author" content="Pelican">
  <meta property="og:url" content="https://blog.espontas.com/blog/customitzacio-de-backend-dautenticacio-amb-django">
  <meta property="og:title" content="Customització de backend d'autenticació amb Django">
  <meta property="og:description" content="Per defecte Django empra el backend d'autenticació "ModelBackend" [sourcecode language="python"]...">
  <meta property="article:published_time" content="2015-12-30 10:11:00+01:00">
	</head>
	<body class="subpage">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header-wrapper">
					<header id="header" class="container">
						<div class="row">
							<div class="12u">

								<!-- Logo -->
									<h1><a href="/" id="logo">Andreu Vallbona</a></h1>

								<!-- Nav -->
									<nav id="nav">
										<a href="/about-me">About me</a>
										<a href="/tags">Tags</a>
										<a href="/categories">Categories</a>
										<a href="/archives">Archives</a>
									</nav>

							</div>
						</div>
					</header>
				</div>

			<!-- Content -->
				<div id="content-wrapper">
					<div id="content">
						<div class="container">
							<div class="row">
								<div class="9u 12u(mobile)">

									<!-- Main Content -->

										<section>
            <header>
            <h2>Customització de backend d'autenticació amb Django</h2>
            <h4>Published on diciembre 30th, 2015</h4>

            </header>
            <p>Per defecte Django empra el backend d'autenticació "ModelBackend"</p>
<p>[sourcecode language="python"]<br>
AUTHENTICATION_BACKENDS = (<br>
'django.contrib.auth.backends.ModelBackend',<br>
)<br>
[/sourcecode]</p>
<p>Aquest "backend" intenta autenticara partir del nom d'usuari i la
contrasenya que reb. Nogensmenys es pot donar el cas que vulguem
autenticar a partir de l'email de l'usuari.<!--more--></p>
<p>Per aquest cas ho podem fer estenent la classe "ModelBackend" i
reimplementant el mètode autenticate:</p>
<p>[sourcecode language="python"]<br>
class MyCustomEmailAuthBackend(ModelBackend):<br>
"""<br>
Allow users to log in with their email address<br>
"""</p>
<p>def authenticate(self, email=None, password=None, **kwargs):</p>
<p>if email is None or password is None:<br>
return None</p>
<p>try:<br>
user = User.objects.get(email=email)<br>
if user.check_password(password):<br>
return user<br>
except User.DoesNotExist:<br>
return None<br>
[/sourcecode]</p>
<p>Un cop que tenim el backend implementat l'hem d'afegir als "settings"
per tal que Django ho tingui en compte:</p>
<p>[sourcecode language="python"]<br>
AUTHENTICATION_BACKENDS = (<br>
'authentication.MyCustomEmailAuthBackend',<br>
'django.contrib.auth.backends.ModelBackend',<br>
)<br>
[/sourcecode]<br>
Aleshores si el nostre formulari posteja l'email i la contrasenya ja ens
podrem autenticar.</p>
            <hr>
              <!-- Pagination -->
            <div class="pagination">
              <a class="pagination" href="https://blog.espontas.com/blog/formateig-per-defecte-de-les-dates-amb-django">
             &larr; Formateig per defecte de les dates amb Django ]
         </a>
              <a class="pagination" href="https://blog.espontas.com/blog/deteccio-idioma-per-subdomini-en-django" >[ Detecció idioma per subdomini en Django &rarr;</a>
            </div>
										</section>

								</div>
								<div class="3u 12u(mobile)">

									<!-- Sidebar -->
                                        <section>
                                            <header>
                                                <h2>Recent Articles</h2>
                                            </header>
                                            <ul class="link-list">

                                                
                                                <li><a class = "red" href="/blog/chained-html-selects">Encadenar select's Html amb Django de manera fàcil i poc intrussiva</a><br></li>

                                                
                                                <li><a class = "red" href="/blog/django-lookup-fields">Lookup fields customitzats en Django</a><br></li>

                                                
                                                <li><a class = "red" href="/blog/django-concurrency">Afegir concurrència a comandes de Django</a><br></li>

                                                
                                                <li><a class = "red" href="/blog/429">Frasses</a><br></li>
                                                
                                            </ul>
                                        </section>                                        <section>
                                            <header>
                                                <h2>Social</h2>
                                            </header>
                                            <p>
                                                My social places
                                            </p>
                                            <ul class="link-list">
                                                <li><a class="red" href="https://www.linkedin.com/in/andreu-vallbona-plazas-b0b58720">LinkedIn</a></li>
                                                <li><a class="red" href="https://twitter.com/avallbona">Twitter</a></li>
                                            </ul>
                                        </section>
								</div>
							</div>
						</div>
					</div>
				</div>

			<!-- Footer -->
                <!-- Copyright -->
                <div id="copyright">
                     &copy; 2018 | Design: <a href="http://html5up.net">HTML5 UP</a> | Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a><br />
                    Based on the <a href="https://html5up.net/halcyonic">Halcyonic theme</a> by HTML5 UP, who graciously releases all of their themes under a <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons license</a>.<br>In short, that means you can do whatever you want with this theme, as long as HTML5 UP is credited.
                </div>


		</div>

		<!-- Scripts -->
            <script src="/theme/js/jquery.min.js"></script>
            <script src="/theme/js/skel.min.js"></script>
            <script src="/theme/js/skel-viewport.min.js"></script>
            <script src="/theme/js/util.js"></script>
            <!--[if lte IE 8]><script src="/theme/js/ie/respond.min.js"></script><![endif]-->
            <script src="/theme/js/main.js"></script>

	</body>
</html>

